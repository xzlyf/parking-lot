<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xz.parking.dao.AdminDao">

    <resultMap id="adminMap" type="com.xz.parking.entity.po.AdminPo">
        <id column="id" property="id"/>
        <result column="employee_no" property="employeeNo"/>
        <result column="passwd" property="passwd"/>
        <result column="name" property="name"/>
        <result column="is_enable" property="isEnable"/>
        <result column="create_date" property="createDate"/>
        <result column="update_date" property="updateDate"/>
        <collection property="roles" ofType="com.xz.parking.entity.po.RolePo">
            <result column="r_desc" property="description"/>
            <result column="r_name" property="name"/>
            <result column="r_scope" property="scope"/>
        </collection>
    </resultMap>
    <select id="queryAdminByEmployeeNo" parameterType="String" resultMap="adminMap">
        select t.* ,r.description as r_desc ,r.name as r_name ,r.scope as r_scope
        from t_admin t
        left join  admin_role tr on t.id = tr.admin_id
        left join t_role r on tr.role_id =r.id
        where t.employee_no = #{employeeNo}
    </select>
</mapper>